<section class="refs section" id="references">
  <div class="container">
    <h2 class="refs__title mono">{{ 'references.title' | t }}</h2>

    <div class="refs__stage-wrap">
      <div class="refs__stage">
      <!-- left preview -->
      <article class="card card--side card--left" role="button" tabindex="0" (click)="prev()" (keyup.enter)="prev()"
        (keyup.space)="prev()" [attr.aria-label]="'references.prev' | t">
        <p class="card__text">{{ references[leftIndex].text | t }}</p>
        <div class="card__footer">
          <span class="card__line"></span>
          <span class="card__author mono">
            {{ references[leftIndex].author }} - {{ references[leftIndex].role }}
          </span>
        </div>
      </article>

      <!-- active -->
      <article class="card card--active">
        <div class="card__quote" aria-hidden="true">&ldquo;</div>

        <p class="card__text">{{ references[activeIndex].text | t }}</p>

        <div class="card__footer">
          <span class="card__line"></span>
          <span class="card__author mono">
            {{ references[activeIndex].author }} - {{ references[activeIndex].role }}
          </span>
        </div>
      </article>

      <!-- right preview -->
      <article class="card card--side card--right" role="button" tabindex="0" (click)="next()" (keyup.enter)="next()"
        (keyup.space)="next()" [attr.aria-label]="'references.next' | t">
        <p class="card__text">{{ references[rightIndex].text | t }}</p>
        <div class="card__footer">
          <span class="card__line"></span>
          <span class="card__author mono">
            {{ references[rightIndex].author }} - {{ references[rightIndex].role }}
          </span>
        </div>
      </article>
      </div>
    </div>

    <div class="refs__nav">
      <button class="navBtn" type="button" (click)="prev()" [attr.aria-label]="'references.prev' | t">
        <span aria-hidden="true">&larr;</span>
      </button>

      <div class="dots" role="tablist" [attr.aria-label]="'references.aria' | t">
        @for (_ of references; track _.author; let i = $index) {
        <button type="button" class="dot"
          [class.is-active]="i === activeIndex" (click)="goTo(i)"
          [attr.aria-label]="('references.goto' | t) + ' ' + (i + 1)"></button>
        }
      </div>

      <button class="navBtn" type="button" (click)="next()" [attr.aria-label]="'references.next' | t">
        <span aria-hidden="true">&rarr;</span>
      </button>
    </div>
  </div>
</section>
