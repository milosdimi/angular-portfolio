<section id="contact" class="contact">
  <div class="container contact__grid">

    <!-- Left -->
    <div class="contact__intro">
      <p class="contact__label mono">{{ 'contact.label' | t }}</p>
      <h2 class="contact__title">{{ 'contact.titleLine1' | t }}<br />{{ 'contact.titleLine2' | t }}</h2>

      <p class="contact__headline mono">{{ 'contact.headline' | t }}</p>
      <p class="contact__text">
        {{ 'contact.text' | t }} <span class="contact__accent">{{ 'contact.accent' | t }}</span>
      </p>
    </div>

    <!-- Right: Form -->
    <form class="contact__form" [formGroup]="form" (ngSubmit)="submit()" novalidate>

      <label class="field">
        <span class="field__label mono">{{ 'contact.fields.name.label' | t }}</span>
        <input class="field__input" type="text" formControlName="name" [attr.placeholder]="'contact.fields.name.placeholder' | t" />
        <span class="field__error" [class.is-visible]="isInvalid('name')">
          {{ 'contact.errors.name' | t }}
        </span>
      </label>

      <label class="field">
        <span class="field__label mono">{{ 'contact.fields.email.label' | t }}</span>
        <input class="field__input" type="email" formControlName="email" [attr.placeholder]="'contact.fields.email.placeholder' | t" />
        <span class="field__error" [class.is-visible]="isInvalid('email')">
          {{ 'contact.errors.email' | t }}
        </span>
      </label>

      <label class="field">
        <span class="field__label mono">{{ 'contact.fields.message.label' | t }}</span>
        <textarea class="field__textarea" formControlName="message" rows="4"
          [attr.placeholder]="'contact.fields.message.placeholder' | t"></textarea>
        <span class="field__error" [class.is-visible]="isInvalid('message')">
          {{ 'contact.errors.message' | t }}
        </span>
      </label>

      <div class="privacy">
        <label class="privacy__check">
          <input type="checkbox" formControlName="privacy" />
        </label>

        <span class="privacy__text">
          {{ 'contact.privacy.prefix' | t }} 
          <a routerLink="/datenschutz">{{ 'contact.privacy.link' | t }}</a>
          {{ 'contact.privacy.suffix' | t }}
        </span>
      </div>


      <span class="field__error" [class.is-visible]="isInvalid('privacy')">
        {{ 'contact.errors.privacy' | t }}
      </span>

      <button class="sendBtn" type="submit" [disabled]="form.invalid || isSubmitting">
        {{ isSubmitting ? ('contact.button.sending' | t) : ('contact.button.default' | t) }}
      </button>

      @if (submitState === 'success') {
      <p class="formMsg formMsg--success">
        {{ 'contact.messages.success' | t }}
      </p>
      }
      @if (submitState === 'error') {
      <p class="formMsg formMsg--error">
        {{ 'contact.messages.error' | t }}
      </p>
      }
    </form>

    <a class="contact__to-top" href="#top" [attr.aria-label]="'contact.toTop' | t">
      <span class="contact__to-top-text">{{ 'contact.toTop' | t }}</span>
      <span class="contact__to-top-arrow" aria-hidden="true">â†‘</span>
    </a>

  </div>
</section>
