<section id="projects" class="projects-section">
  <div class="container">

    <div class="section-header">
      <span class="section-label mono">Portfolio</span>
      <h2 class="section-title">Featured Projects</h2>
      <p class="section-description">
        Explore a selection of my work here - Interact with projects to see my skills in action.
      </p>
    </div>

    <div class="projects-layout">
      <!-- Left: list -->
      <div class="projects-list" role="list">
        <button *ngFor="let project of projects; trackBy: trackById" class="project-item" type="button" role="listitem"
          (mouseenter)="setHover(project.id)" (mouseleave)="setHover(null)" (focus)="setHover(project.id)"
          (blur)="setHover(null)" (click)="openProject(project)" [class.active]="selectedProject?.id === project.id">
          <div class="project-main">
            <h3 class="project-title">
              {{ project.title }}
              <span class="project-arrow" aria-hidden="true">↗</span>
            </h3>

            <div class="technologies mono">
              <span *ngFor="let tech of project.technologies; let last = last">
                {{ tech }}{{ !last ? ' | ' : '' }}
              </span>
            </div>
          </div>
        </button>
      </div>

      <!-- Right: hover preview -->
      <div class="preview" aria-hidden="true">
        <div class="preview__frame" [class.is-visible]="previewProject">
          <img *ngIf="previewProject" class="preview__img" [src]="previewProject.imageUrl"
            [alt]="previewProject.title" />
          <div class="preview__hatch"></div>
        </div>
      </div>
    </div>

    <div class="github-cta">
      <a href="https://github.com/milosdimi?tab=repositories" target="_blank" rel="noopener noreferrer" class="mono">
        Want to see more projects? <span class="cta-arrow">↗</span>
      </a>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" *ngIf="selectedProject" (click)="closeProject()">
    <div class="modal__card" (click)="$event.stopPropagation()" role="dialog" aria-modal="true">
      <button class="modal__close" type="button" (click)="closeProject()" aria-label="Close">×</button>

      <div class="modal__grid">
        <div class="modal__left">
          <div class="modal__number mono">{{ getProjectNumber(selectedProject!.id) }}</div>
          <h3 class="modal__title">{{ selectedProject!.title }}</h3>

          <p class="modal__question mono">What is this project about?</p>
          <p class="modal__desc">{{ selectedProject!.description }}</p>

          <div class="modal__tech">
            <div class="tech" *ngFor="let tech of selectedProject!.technologies">
              <img *ngIf="getTechIcon(tech) as icon" [src]="icon" [alt]="tech" />
              <span class="mono">{{ tech }}</span>
            </div>
          </div>

          <div class="modal__actions">
            <a class="btn btn--outline" [href]="selectedProject!.githubUrl" target="_blank">
              GitHub <span class="btn__arrow">↗</span>
            </a>

            <a class="btn btn--outline btn--accent" [href]="selectedProject!.liveUrl" target="_blank">
              Live Test <span class="btn__arrow">↗</span>
            </a>
          </div>

        </div>

        <div class="modal__right">
          <img class="modal__img" [src]="selectedProject!.imageUrl" [alt]="selectedProject!.title" />
          <button class="modal__next mono" type="button" (click)="nextProject()">
            Next project <span aria-hidden="true">→</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>